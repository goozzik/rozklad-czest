<!DOCTYPE html>
%html
  %head
    %title rozkład.czest.pl - Jedyny serwis wyszukujący połączenia komunikacji miejskiej w Częstochowie.
    %meta{"http-equiv" => "Content-Type", "content" => "text/html; charset=UTF-8"}
    - if session[:mobile]
      %meta{:content => "width=device-width, initial-scale=1", :name => "viewport"}
      = stylesheet_link_tag 'mobile', 'jquery.mobile.css', 'jquery.ui.css', 'default'
      = javascript_include_tag :defaults,
                               'jquery.mobile.js',
                               'jquery.ui.js',
                               'autocomplete-rails.js',
                               'http://maps.google.com/maps/api/js?sensor=true'
      %link{:href => "images/iphone_icon.png", :rel => "apple-touch-icon"}
    - else
      = stylesheet_link_tag '960', 'reset', 'text', 'desktop', 'jquery.ui.css', 'default'
      = javascript_include_tag :defaults,
                               'jquery.ui.js',
                               'autocomplete-rails.js',
                               'http://maps.google.com/maps/api/js?sensor=true'
    = csrf_meta_tag
  %body{:onload => current_action?('map') ? 'getMap();' : nil}
    %div{'data-role' => 'page', :style => (current_action?('map') && session[:mobile]) ? 'width:100%; height:100%;' : nil}
      .container_12{'data-role' => 'header'}
        - unless session[:mobile]
          #logo
            .grid_6.prefix_4{:style => 'margin-top: 4em;'}
              %h1{:style => 'margin-bottom:0;'} Rozklad.czest.pl
              #desc Jedyny serwis wyszukujący połączenia komunikacji miejskiej w Częstochowie.
        %div{'data-role' => 'navbar'}
          %ul
            %li.normal= link_to 'Index', root_path, :rel => 'external'
            %li.search
              %b= link_to 'SZUKAJ', search_schedule_new_search_path, :rel => 'external'
            - if current_user
              %li.normal= link_to 'Ulubione', user_favourites_path(current_user.id), :rel => 'external'
            %li.normal= link_to 'Mapa', pages_static_map_path, :rel => 'external'
            %li.normal= link_to 'Rozkłady', schedules_index_path, :rel => 'external'
      .container_12{'data-role' => 'content',
        :style => (current_action?('map') || current_action?('static_map') and session[:mobile]) ? 'width:100%; height:100%; padding:0;' : nil}
        = yield
